{% extends "base.html" %} {% block content %} {% load static %}
<!-- <style>
        th, td, p, input {
            font:14px Verdana;
        }
        table, th, td
        {
            border: solid 1px #DDD;
            border-collapse: collapse;
            padding: 2px 3px;
            text-align: center;
        }
        th {
            font-weight:bold;
        }
    </style> -->
{% if user.is_authenticated %}
<script charset="utf-8">
    let c = '{{ table_list }}'
    let a = '{{}}'
    console.log('c', c)
</script>{% if jobs == '1' %} {% include "data1.html" %}
<script>
    var htmlfile = '{{ "data1.html" }}'
    console.log("htmlfile")
    console.log(htmlfile)
</script>
{% endif%} {% if jobs == '2' %} {% include "data1.html" %}
<p></p>
<p></p>
{% include "data2.html" %} {% endif%} {% if jobs == '3' %} {% include "data1.html" %}
<p></p>
<p></p>
{% include "data2.html" %}
<p></p>
<p></p>
{% include "data3.html" %} {% endif%}
<p></p>
<p></p>
{% if jobs == '4' %} {% include "data1.html" %}
<p></p>
<p></p>
{% include "data2.html" %}
<p></p>
<p></p>
{% include "data3.html" %}
<p></p>
<p></p>
{% include "data4.html" %} {% endif%}
<p></p>
<p></p>
<input type="button" onclick="CreateTableFromJSON()" value="Create Table From JSON" />
<p id="showData"></p>

<script charset="utf-8">
    function CreateTableFromJSON() {
        var myArr = []
        for (var i in '{{ json_list }}') {
            myArr.push(json_list[i])

        }

        var col = [];
        for (var i = 0; i < myArr.length; i++) {
            for (var key in myArr[i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }

        // CREATE DYNAMIC TABLE.
        var table = document.createElement("table");

        // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

        var tr = table.insertRow(-1); // TABLE ROW.

        for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th"); // TABLE HEADER.
            th.innerHTML = col[i];
            tr.appendChild(th);
        }

        // ADD JSON DATA TO THE TABLE AS ROWS.
        for (var i = 0; i < myArr.length; i++) {

            tr = table.insertRow(-1);

            for (var j = 0; j < col.length; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = myArr[i][col[j]];
            }
        }

        // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
        var divContainer = document.getElementById("showData");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);
    }
</script>
<br>
<a href="{% url 'pdf_list' %}" class="w3-btn w3-black">Back to pdf list</a>
<br> {% endif %} {% endblock content %}